\pdfminorversion=7
\documentclass[../main.tex]{subfiles}

\begin{document}
\ifx\chapincluded\undefined
  \begin{refsection}[main-bib]
 \fi

\chapter{Research Contributions}
\label{chap:rcontrib}

The research contributions of this thesis are presented as five articles. The first four (\Cref{chap:cal-paper,chap:pact-paper,chap:wosc-paper,chap:hpca-paper}), and the last (\Cref{chap:eurosys-paper}) is pending review at the time of thesis submission. In this chapter, we summarize the contributions of each paper and contextualize the papers in regard to prior work. The papers that are included in this thesis are:


\vspace*{0.8cm}

\noindent
\begin{tabular}{lp{0.8\textwidth}}
\textbf{Paper A} & \textbf{BTB-X: A Storage-Effective BTB Organization} \newline
                     Truls Asheim, Boris Grot and Rakesh Kumar \newline
                     In: IEEE Computer Architecture Letters, Volume: 20, Issue: 2, July-December 2021
                     \vspace*{0.3cm} \\
\textbf{Paper B} & \textbf{A Specialized BTB Organization for Servers} \newline
                     Truls Asheim, Boris Grot and Rakesh Kumar \newline
                     In':Proceedings of the International Conference on Parallel Architectures and Compilation Techniques, 2022
                     \vspace*{0.3cm} \\
\textbf{Paper C} & \textbf{A Specialized BTB Organization for Servers} \newline
                     Truls Asheim, Boris Grot and Rakesh Kumar \newline
                     In': 
                     \vspace*{0.3cm} \\

\end{tabular}


\section{Contribution overvew}

\subsection{Primary contribution 1: An in-depth microarchitectural profiling of serverless functions}


\paragraph{Motivation} Function-as-a-service (FaaS) computing is a rapidly growing cloud computing model. In FaaS, the unit of computation is a function, normally with a very short execution time. Since a FaaS function is loaded and started when it is needed and shut down when it has finished executing, will co-schedule a large number of functions on the same processors to maximize server utilization. Recent work has reported that this heavily interleaved execution leads to microarchitectural state thrashing causing most of FaaS function execution to occur on a cold microarchitectural state~\cite{shahrad19_archit_implic_funct_servic_comput,lukewarm_serverless}. This work, however, stops short of investigating which specific properties of FaaS execution that causes this poor utilization of microarchitectural state.

\paragraph{Methodology}
To address this gap in the research, we perform an evaluation of FaaS functions executed on a processor with warm and cold microarchitectural states respectively. We use a representative suite of FaaS functions consisting of both real-world and synthetic workloads. Using synthetic workloads allow us to modify specific parameters of interest in a targeted way. To measure the impact of executing the functions on a warm and cold microarchitectural state we execute the functions in tow modes: back-to-back and interleaved. In back-to-back execution, the functions are executed repeatedly in a tight loop. In the interleaved execution case, each invocation of a function is interleaved with an invocation of a \emph{trhasher} function that thrashes all existing microarchitectural state. The thrasher function achieves this by performing two actions: \begin{inparaenum}[1) \item it invokes the x86 WBINVD instruction that writes back and invalidates the entire cache hierarchy of a processor core and \item it runs a function that executes a long sequence of branches in order to thrash the state of the BTB and the branch predictor.\end{inparaenum} We measure microarchitectural parameters using perf and use the TopDown methodology~\cite{yasin14_top_down} for identifying specific microarchitectural bottlenecks. For both the back-to-back and interleaved execution we measured both the wall-clock running time of the functions and key microarchitectural parameters.

To support our findings (presented below) we perform a measurement of the code footprint of each of the FaaS functions that we use in our analysis. Doing this using a full microarchitectural simulator is a slow and tedious effort and it is not possible to perform this analysis statically. Therefore, we use a method based on an approach described in~\cite{splash2} that use branch-record traces and a cache simulator to estimate the code footprint of a function. The branch-record traces show the branches taken by a program. By running the locations of these branches through a cache simulator, we can measure how big the cache has to be in order to fit the entire code footprint of a program. More specifically this is done by changing the size of the simulator cache until the observed miss-rate reaches zero. When this is the case, the entire code footprint of the program fit inside the cache.


\paragraph{Key results}
Our results show that two properties of a FaaS function impacts how sensitive it is to being executed on a cold microarchitectural state: Its execution time and its code footprint.

For example, the shortest running function that we evaluate (0.25 ms) show a slowdown of $17\times$ when executed on a processor with cold microarchitectural state. The longest running function 

\subsection{Primary contribution 2: A storage-efficient BTB organization for servers}

\paragraph{Motivation}

\paragraph{Methodology}

\paragraph{Key results}

\truls{Emphasize how the evaluation methodology using the traces from server workloads applies to FaaS workloads since a) they are fundamentally similar except that FaaS workloads run for a shorter time and b) we and prior work shows that FaaS workloads also have a large code footprint}

\subsection{Primary contribution 3: A software-based optimization methodology for serverless functions.}
\paragraph{Motivation}

\paragraph{Methodology}

\paragraph{Key results}


%\subsection{Primary contribution 2: 

\ifx\chapincluded\undefined
  \printbibliography
  \end{refsection}
 \fi
\end{document}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% TeX-command-extra-options: "-shell-escape"
%%% End: